[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "BEPIDL Study - Notes",
    "section": "",
    "text": "Welcome! I’m Heli, a data analyst at Drexel Urban Health Collaborative, and this is home of the notes from Built Environment, Pedestrian Injuries and Deep Learning (BEPIDL) Study, a project led by Dr. Alex Quistberg and funded by NIH. You can find out more about the project on the NIH website."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "BEPIDL-Notes",
    "section": "",
    "text": "Exploratory Data Analysis of BEPIDL Data\n\n\nGeo-referenced ZAT-level Indicators\n\n\n\n\n\n\n\n\n\nJan 23, 2024\n\n\nHeli Xu\n\n\n\n\n\n\n  \n\n\n\n\nInitial Look into BEPIDL Data\n\n\nZAT and Street Level\n\n\n\n\n\n\n\n\n\nJan 17, 2024\n\n\nHeli Xu\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/EDA1_1st_look_var/EDA1_1st_look_var.html",
    "href": "posts/EDA1_1st_look_var/EDA1_1st_look_var.html",
    "title": "Initial Look into BEPIDL data",
    "section": "",
    "text": "In this report, my goal is to get familiar with the variables (indicators), what they represent (according to codebook), how complete the datasets are, and potentially examine the distribution of the variables."
  },
  {
    "objectID": "posts/EDA1_1st_look_var/EDA1_1st_look_var.html#zat-level",
    "href": "posts/EDA1_1st_look_var/EDA1_1st_look_var.html#zat-level",
    "title": "Initial Look into BEPIDL data",
    "section": "ZAT level",
    "text": "ZAT level\nAt ZAT level, two files (folders) are included (along with the codebook).\n\nZAT.zip: boundary files – a table of 1141 rows, 6 cols (each row being a ZAT unit);\nIntersections/ZAT_INDICADORES.xlsx: a table of 919 rows, 18 cols (each row being a ZAT unit).\n\n\nZAT folder\nTo begin with, I looked at the ZAT folder, which contains shapefiles that define boundaries of each ZAT zone.\n\n\nCode\nlibrary(readxl)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(readr)\nlibrary(sf)\nlibrary(leaflet)\n\nzat <- st_read(\"../../../../data/ZAT/ZAT_geo/ZAT.shp\")\n\n\nReading layer `ZAT' from data source \n  `D:\\LocalGitHub\\BEPIDL\\data\\ZAT\\ZAT_geo\\ZAT.shp' using driver `ESRI Shapefile'\nSimple feature collection with 1141 features and 5 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY, XYZ\nBounding box:  xmin: -74.88439 ymin: 3.70344 xmax: -73.05211 ymax: 5.83076\nz_range:       zmin: 0 zmax: 0\nGeodetic CRS:  MAGNA-SIRGAS\n\n\nCode\nzat\n\n\nSimple feature collection with 1141 features and 5 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY, XYZ\nBounding box:  xmin: -74.88439 ymin: 3.70344 xmax: -73.05211 ymax: 5.83076\nz_range:       zmin: 0 zmax: 0\nGeodetic CRS:  MAGNA-SIRGAS\nFirst 10 features:\n         Area MUNCod NOMMun ZAT UTAM                       geometry\n1  1366816039      0   <NA> 810  N/A MULTIPOLYGON Z (((-74.08207...\n2   824419773      0   <NA> 809  N/A MULTIPOLYGON Z (((-74.05947...\n3  1823077343      0   <NA> 823  N/A MULTIPOLYGON Z (((-73.64757...\n4   929997085      0   <NA> 822  N/A MULTIPOLYGON Z (((-73.54534...\n5  1409253432      0   <NA> 821  N/A MULTIPOLYGON Z (((-73.59517...\n6  1085719093  11001 Bogotá 796 UPR3 MULTIPOLYGON Z (((-74.08374...\n7  1820638886      0   <NA> 800  N/A MULTIPOLYGON Z (((-74.30147...\n8  1503956580      0   <NA> 811  N/A MULTIPOLYGON Z (((-74.49689...\n9  2349669218      0   <NA> 820  N/A MULTIPOLYGON Z (((-73.99614...\n10 1322014504      0   <NA> 812  N/A MULTIPOLYGON Z (((-74.4526 ...\n\n\nCode\nzat %>%\n  st_zm() %>% \n  leaflet() %>%\n  addTiles() %>%\n  leaflet::addPolygons()\n\n\n\n\n\n\n\n\nZAT_INDICADORES\nNext, we’re looking at the ZAT_INDICADORES.xlsx table. From referencing the codebook, I noticed the indicators in this table seem to be the “old” version. For all the ZAT included, there are no missing data, while some of the values are zeros. Here we are showing the distribution of all the indicators in the table, grouped into three categories (loosely tentatively): features about public transit, road and traffic lights.\n\nPublic transit\n\n\nCode\nzat_data <- read_xlsx(\"../../../../data/ZAT/ZAT_INDICADORES.xlsx\")\n\nzat_data_long <- zat_data %>% \n  select(-2, -3) %>% \n  pivot_longer(-ZAT, names_to = \"indicator\")\n\nbus <- c('BUSTOPDENS', 'NUMRBP', 'LONGRBP', 'NUMRT', 'LONGRT')\nonroad <- c('LONGMV', 'LRDENS', 'BPRDRATE', 'NUMINT', 'INTDENS')\ntlight <- c('NUMTTFLIGH', 'NUMPTFLIGH')\nbyroad <- c('NUMTTREES', 'NUMSTTREES', 'NUMBRIDGES')\n  \nzat_data_long %>% \n  filter(indicator%in%all_of(bus)) %>% \n  ggplot(aes(x=value)) +\n           geom_histogram(fill = \"skyblue\", color = \"blue\")+\n           facet_wrap(~indicator, scales = \"free\") +\n           theme_minimal() +\n  labs(title = \"Distribution of Indicators related to Bus/BRT\")\n\n\n\n\n\n\n\nRoad features\n\n\nCode\nzat_data_long %>% \n  filter(indicator%in%all_of(onroad)) %>% \n  ggplot(aes(x=value)) +\n           geom_histogram(fill = \"skyblue\", color = \"blue\")+\n           facet_wrap(~indicator, scales = \"free\") +\n           theme_minimal()+\n  labs(title = \"Distribution of Indicators related to Features on the Road\")\n\n\n\n\n\n\n\nCode\nzat_data_long %>% \n  filter(indicator%in%all_of(byroad)) %>% \n  ggplot(aes(x=value)) +\n           geom_histogram(fill = \"skyblue\", color = \"blue\", alpha = 0.7)+\n           facet_wrap(~indicator, scales = \"free\") +\n           theme_minimal()+\n  labs(title = \"Distribution of Indicators related to Features by the Road\")\n\n\n\n\n\n\n\nTraffic lights\n\n\nCode\nzat_data_long %>% \n  filter(indicator%in%all_of(tlight)) %>% \n  ggplot(aes(x=value)) +\n           geom_histogram(fill = \"skyblue\", color = \"blue\", alpha = 0.7)+\n           facet_wrap(~indicator, scales = \"free\") +\n           theme_minimal()+\n  labs(title = \"Distribution of Indicators about Traffic Lights\")"
  },
  {
    "objectID": "posts/EDA1_1st_look_var/EDA1_1st_look_var.html#street-level",
    "href": "posts/EDA1_1st_look_var/EDA1_1st_look_var.html#street-level",
    "title": "Initial Look into BEPIDL data",
    "section": "Street level",
    "text": "Street level\nSo far, the data folder included is:\n\nCalles_datos/\n\nThis is a geo-referenced data table containing qualitative and quantitative data at the street level. Due to the size of the table, we are taking first 1000 rows to take a look at the geometry:\n\n\nCode\ncalles_1000 <- readRDS(\"../../../../data/Calles/calles_1000.rds\")\n\ncalles_1000 %>% \n  leaflet() %>% \n  addTiles() %>% \n  leaflet::addPolygons()\n\n\n\n\n\n\nApart from the geometry information, there are many variables included in the table, and the variable names do not seem to be in codebook. Skimming the full table:\n\n\nCode\nlibrary(reactable)\n\nskim_calles <- read_csv(\"../../../../analysis/skim_calles.csv\") %>% \n  select(-1) %>% \n  rename(col_type = skim_type,\n         col_names = skim_variable)\n         \nreactable(skim_calles) \n\n\n\n\n\n\n\nIn the initial skimming report above, the types of all 67 columns, mean/sd and distribution (for numeric columns) are shown. While the completion rate of the columns seem high, some of the columns have many zeros, with 75% percentile =0."
  },
  {
    "objectID": "posts/EDA2_georef_ZAT/EDA2_georef_ZAT.html",
    "href": "posts/EDA2_georef_ZAT/EDA2_georef_ZAT.html",
    "title": "Exploratory Data Analysis of BEPIDL Data",
    "section": "",
    "text": "Building on the initial exploratory data analysis on variable distribution, I’d like to join the spatial information from ZAT folder with the variables from ZAT_INDICADORES.xlsx and visualize the geo-referenced data."
  },
  {
    "objectID": "posts/EDA2_georef_ZAT/EDA2_georef_ZAT.html#files-included",
    "href": "posts/EDA2_georef_ZAT/EDA2_georef_ZAT.html#files-included",
    "title": "Exploratory Data Analysis of BEPIDL Data",
    "section": "Files included",
    "text": "Files included\n\nZAT/\nThis folder contains boundary files for the ZAT units – a table of 1141 rows, 6 cols (each row being a ZAT unit); (dropping z dimension to create interactive maps).\n\n\nCode\nlibrary(readxl)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(readr)\nlibrary(sf)\nlibrary(leaflet)\n\nzat <- st_read(\"../../../../data/ZAT/ZAT_geo/ZAT.shp\")\n\n\nReading layer `ZAT' from data source \n  `D:\\LocalGitHub\\BEPIDL\\data\\ZAT\\ZAT_geo\\ZAT.shp' using driver `ESRI Shapefile'\nSimple feature collection with 1141 features and 5 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY, XYZ\nBounding box:  xmin: -74.88439 ymin: 3.70344 xmax: -73.05211 ymax: 5.83076\nz_range:       zmin: 0 zmax: 0\nGeodetic CRS:  MAGNA-SIRGAS\n\n\nCode\nzat %>%\n  st_zm() %>% \n  leaflet() %>%\n  addProviderTiles(providers$CartoDB.Voyager) %>%\n  addPolygons()\n\n\n\n\n\n\n\n\nZAT_INDICADORES.xlsx\nThis is a data table of 919 rows, 18 cols (each row being a ZAT unit).\nAccording to the codebook, the indicators in this table seem to be the “old” version. For all the ZAT included, there are no missing data, while some of the values are zeros. As seen from the row count, it contains fewer ZAT units than the shapefiles. (first 10 rows shown below)\n\n\nCode\nzat_data <- read_xlsx(\"../../../../data/ZAT/ZAT_INDICADORES.xlsx\")\nzat_data[1:10,]\n\n\n# A tibble: 10 × 18\n     ZAT `Area M2` areakm2 BUSTOPDENS LONGMV LRDENS BPRDRATE NUMINT INTDENS\n   <dbl>     <dbl>   <dbl>      <dbl>  <dbl>  <dbl>    <dbl>  <dbl>   <dbl>\n 1    83  1016244.   1.02       13.8  10852. 10679.   0         100   98.4 \n 2   854   219816.   0.220      18.2   1391.  6330.   0          21   95.5 \n 3    57   513564.   0.514      35.0   6935. 13504.   0          99  193.  \n 4    20   217888.   0.218      18.4   3586. 16460.   0          40  184.  \n 5    18   162708.   0.163      24.6   1083.  6655.   0           6   36.9 \n 6    19   228574.   0.229       0        0      0    0           0    0   \n 7    84   239887.   0.240       0      759.  3163.   0           5   20.8 \n 8   559  1184382.   1.18        0      167.   141.   0           2    1.69\n 9   561   807833.   0.808       3.71 10939. 13542.   0.0603    159  197.  \n10   947   916149.   0.916       8.73 17013. 18570.   0.0677    216  236.  \n# ℹ 9 more variables: NUMTTREES <dbl>, NUMSTTREES <dbl>, NUMBRIDGES <dbl>,\n#   NUMTTFLIGH <dbl>, NUMPTFLIGH <dbl>, NUMRBP <dbl>, LONGRBP <dbl>,\n#   NUMRT <dbl>, LONGRT <dbl>"
  },
  {
    "objectID": "posts/EDA2_georef_ZAT/EDA2_georef_ZAT.html#joining-geometry-with-data",
    "href": "posts/EDA2_georef_ZAT/EDA2_georef_ZAT.html#joining-geometry-with-data",
    "title": "Exploratory Data Analysis of BEPIDL Data",
    "section": "Joining Geometry with Data",
    "text": "Joining Geometry with Data\nHere we’ll join the ZAT shapefiles with the ZAT_INDICADORES.xlsx by ZAT ID, keeping the ZAT units that we have data for, resulting in a table of 919 rows and 23 columns.\n\n\nCode\ngeoref_zat <- zat_data %>% \n  left_join(zat, by = \"ZAT\") %>% \n  st_as_sf()"
  },
  {
    "objectID": "posts/EDA2_georef_ZAT/EDA2_georef_ZAT.html#visualizing-indicators-in-maps",
    "href": "posts/EDA2_georef_ZAT/EDA2_georef_ZAT.html#visualizing-indicators-in-maps",
    "title": "Exploratory Data Analysis of BEPIDL Data",
    "section": "Visualizing Indicators in Maps",
    "text": "Visualizing Indicators in Maps\nWe’ll use the georeferenced data to visualize the indicators in maps (dropping z dimension, datum set to WGS84). With loose categorizing the variables into 3 groups: public transits, road features and traffic lights, we’ll show interactive maps for one variable for each group along with distributions of all variables.\n\nPublic transit\n\n\nCode\nlibrary(glue)\n# set color palette for circles\npal <- colorNumeric(\n  palette = c(\"orange\",\"navy\"),\n  domain = georef_zat$BUSTOPDENS\n)\n\nzat_label <- glue(\"ZAT{georef_zat$ZAT} Bus stop density: {round(georef_zat$BUSTOPDENS,2)}/km2\")\n\ngeoref_zat %>%\n  st_zm() %>%\n  st_transform(crs = st_crs(\"+proj=longlat +datum=WGS84\")) %>%\n  leaflet() %>%\n  addProviderTiles(providers$CartoDB.Voyager)  %>%\n  addPolygons(color = \"white\", \n              weight = 0.5,\n              smoothFactor = 0.5,\n              opacity = 1,\n              fillColor = ~pal(BUSTOPDENS),\n              fillOpacity = 0.8,\n              highlightOptions = highlightOptions(\n                weight = 5,\n                color = \"#666\",\n                fillOpacity = 0.8,\n                bringToFront = TRUE),\n              label = zat_label,\n              labelOptions = labelOptions(\n                style = list(\n                  \"font-family\" = \"Fira Sans, sans-serif\",\n                  \"font-size\" = \"1.2em\"\n                ))\n              ) %>% \n  addLegend(\"bottomleft\",\n            pal = pal,\n            values = ~BUSTOPDENS,\n            title = \"Bus Stop Density in Bogotá</br>(ZAT-level)\",\n            opacity = 1)\n\n\n\n\n\n\n\n\n\n\n\nCode\nzat_data_long <- zat_data %>% \n  select(-2, -3) %>% \n  pivot_longer(-ZAT, names_to = \"indicator\")\n\nbus <- c('BUSTOPDENS', 'NUMRBP', 'LONGRBP', 'NUMRT', 'LONGRT')\nonroad <- c('LONGMV', 'LRDENS', 'BPRDRATE', 'NUMINT', 'INTDENS')\ntlight <- c('NUMTTFLIGH', 'NUMPTFLIGH')\nbyroad <- c('NUMTTREES', 'NUMSTTREES', 'NUMBRIDGES')\n  \nzat_data_long %>% \n  filter(indicator%in%all_of(bus)) %>% \n  ggplot(aes(x=value)) +\n           geom_histogram(fill = \"skyblue\", color = \"blue\")+\n           facet_wrap(~indicator, scales = \"free\") +\n           theme_minimal() +\n  labs(title = \"Distribution of Indicators related to Bus/BRT\")+\n  theme(\n    strip.background = element_rect(fill = \"#dadada\", color = \"white\"),\n    panel.grid.minor = element_blank(),\n    plot.title = element_text(size = 15, face = \"bold\")\n  )\n\n\n\n\n\n\n\nRoad features\n\n\nCode\npal2 <- colorNumeric(\n  palette = c(\"orange\",\"navy\"),\n  domain = georef_zat$INTDENS\n)\n\nzat_label2 <- glue(\"ZAT{georef_zat$ZAT} Intersection density: {round(georef_zat$INTDENS,2)}/km2\")\n\ngeoref_zat %>%\n  st_zm() %>%\n  st_transform(crs = st_crs(\"+proj=longlat +datum=WGS84\")) %>%\n  leaflet() %>%\n  addProviderTiles(providers$CartoDB.Voyager)  %>%\n  addPolygons(color = \"white\", \n              weight = 0.5,\n              smoothFactor = 0.5,\n              opacity = 1,\n              fillColor = ~pal2(INTDENS),\n              fillOpacity = 0.8,\n              highlightOptions = highlightOptions(\n                weight = 5,\n                color = \"#666\",\n                fillOpacity = 0.8,\n                bringToFront = TRUE),\n              label = zat_label2,\n              labelOptions = labelOptions(\n                style = list(\n                  \"font-family\" = \"Fira Sans, sans-serif\",\n                  \"font-size\" = \"1.2em\"\n                ))\n              ) %>% \n  addLegend(\"bottomleft\",\n            pal = pal2,\n            values = ~INTDENS,\n            title = \"Intersection Density in Bogotá</br>(ZAT-level)\",\n            opacity = 1)\n\n\n\n\n\n\n\n\nCode\nzat_data_long %>% \n  filter(indicator%in%all_of(onroad)) %>% \n  ggplot(aes(x=value)) +\n           geom_histogram(fill = \"skyblue\", color = \"blue\")+\n           facet_wrap(~indicator, scales = \"free\") +\n           theme_minimal()+\n  labs(title = \"Distribution of Indicators related to Features on the Road\") +\n  theme(\n    strip.background = element_rect(fill = \"#dadada\", color = \"white\"),\n    panel.grid.minor = element_blank(),\n    plot.title = element_text(size = 15, face = \"bold\")\n  )\n\n\n\n\n\n\n\nCode\nzat_data_long %>% \n  filter(indicator%in%all_of(byroad)) %>% \n  ggplot(aes(x=value)) +\n           geom_histogram(fill = \"skyblue\", color = \"blue\", alpha = 0.7)+\n           facet_wrap(~indicator, scales = \"free\") +\n           theme_minimal()+\n  labs(title = \"Distribution of Indicators related to Features by the Road\") +\n  theme(\n    strip.background = element_rect(fill = \"#dadada\", color = \"white\"),\n    panel.grid.minor = element_blank(),\n    plot.title = element_text(size = 15, face = \"bold\")\n  )\n\n\n\n\n\n\n\nTraffic lights\n\n\nCode\npal3 <- colorNumeric(\n  palette = c(\"orange\",\"navy\"),\n  domain = georef_zat$NUMTTFLIGH\n)\n\nzat_label3 <- glue(\"ZAT{georef_zat$ZAT} Total traffic lights: {georef_zat$NUMTTFLIGH}\")\n\ngeoref_zat %>%\n  st_zm() %>%\n  st_transform(crs = st_crs(\"+proj=longlat +datum=WGS84\")) %>%\n  leaflet() %>%\n  addProviderTiles(providers$CartoDB.Voyager)  %>%\n  addPolygons(color = \"white\", \n              weight = 0.5,\n              smoothFactor = 0.5,\n              opacity = 1,\n              fillColor = ~pal3(NUMTTFLIGH),\n              fillOpacity = 0.8,\n              highlightOptions = highlightOptions(\n                weight = 5,\n                color = \"#666\",\n                fillOpacity = 0.8,\n                bringToFront = TRUE),\n              label = zat_label3,\n              labelOptions = labelOptions(\n                style = list(\n                  \"font-family\" = \"Fira Sans, sans-serif\",\n                  \"font-size\" = \"1.2em\"\n                ))\n              ) %>% \n  addLegend(\"bottomleft\",\n            pal = pal3,\n            values = ~NUMTTFLIGH,\n            title = \"Total Traffic Lights in Bogotá</br>(ZAT-level)\",\n            opacity = 1)\n\n\n\n\n\n\n\n\nCode\nzat_data_long %>% \n  filter(indicator%in%all_of(tlight)) %>% \n  ggplot(aes(x=value)) +\n           geom_histogram(fill = \"skyblue\", color = \"blue\", alpha = 0.7)+\n           facet_wrap(~indicator, scales = \"free\") +\n           theme_minimal()+\n  labs(title = \"Distribution of Indicators about Traffic Lights\") +\n  theme(\n    strip.background = element_rect(fill = \"#dadada\", color = \"white\"),\n    panel.grid.minor = element_blank(),\n    plot.title = element_text(size = 15, face = \"bold\")\n  )\n\n\n\n\n\nInitial takeaway: some of the indicators seem to show similar spatial patterns, though there is a significant number of lower count values in the dataset which might make the visualization less clear."
  }
]